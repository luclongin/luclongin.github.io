{"ast":null,"code":"import _regeneratorRuntime from\"/home/luc/Documents/luclongin.github.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/luc/Documents/luclongin.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{Fragment}from\"react\";import AddCardButtonPulseRaw from'../manageOrder/addCardButtonPulse/addCardButtonPulseRaw.component';import AddIcon from'@mui/icons-material/Add';import{Paper,styled,Typography,Box}from\"@mui/material\";import{useDispatch,useSelector}from\"react-redux\";import{photoUpdatedSrc}from\"../../features/photoEdition/PhotoSlice\";import{nextButtonEnabled}from\"../../features/handleFormButtons/FormButtonsSlice\";import UploadPhotoCardHover from\"../UploadPhotoCardHover/uploadPhotoCardHover.component\";import{photoSetFile}from\"../../features/photoEdition/PhotoSlice\";import{uploadCroppedPhotos}from\"../../features/order/orders\";import theme from\"../../utils/theme\";import{getImageSize}from'../../utils/imageTools';import{setImgResolutionMsg}from\"../../features/errorMessages/errorMessages\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UploadPhotoCardEmpty=function UploadPhotoCardEmpty(_ref){var id=_ref.id,_ref$width=_ref.width,width=_ref$width===void 0?350:_ref$width;var dispatch=useDispatch();var photos=useSelector(function(state){return state.photos;});var letters=useSelector(function(state){return state.letters;});var PaperButton=styled(Paper)({display:'flex',width:width,minWidth:width,height:width,justifyContent:'center',alignItems:'center',borderRadius:'5px',border:'2px color #666'});var handleImage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var acceptImage,imageBlob,imgSize,enableNext,imgCount,lettersAllFilled;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();acceptImage=false;imageBlob=URL.createObjectURL(e.target.files[0]);// checking if image size is acceptable\n_context.next=5;return getImageSize(imageBlob);case 5:imgSize=_context.sent;if(imgSize.width>500&&imgSize.height>500){acceptImage=true;}// if image is within the accepted dimensions\nif(acceptImage){dispatch(setImgResolutionMsg(false));dispatch(photoUpdatedSrc({id:id,imgSrc:imageBlob,type:e.target.files[0].type}));// HANDLE NEXT BUTTON IF THREE PHOTOS\n// INDEPENDENT FROM PHOTOS\n// CASE: LAST IMAGE IS UPLOADED AND ALL LETTERS ARE ALREADY FILLED\nenableNext=true;// because this is dispatch image, there is a lag of one photo\n// so if we have 2 photos imgSrc already completed\n// and this function is called, then that means that a 3rd one\nimgCount=0;photos.map(function(photo){if(photo.imgSrc!==null){imgCount+=1;}});if(imgCount<2){enableNext=false;}lettersAllFilled=letters.letter1!==\"\"&&letters.letter2!==\"\"&&letters.letter3!==\"\";enableNext=enableNext&&lettersAllFilled;if(enableNext){dispatch(nextButtonEnabled(true));}else{dispatch(nextButtonEnabled(false));}}else{dispatch(setImgResolutionMsg(true));}case 8:case\"end\":return _context.stop();}},_callee);}));return function handleImage(_x){return _ref2.apply(this,arguments);};}();// Needed for Hovering\nvar HoverBox=styled(Box)({\"& .hidden-hover\":{display:\"none\"},\"&:hover .hidden-hover\":{display:\"flex\",marginTop:0}});var relativeFontSize='';if(width<350){relativeFontSize='7.5em';}return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(HoverBox,{sx:{position:'relative',display:'flex',justifyContent:'center'},children:[/*#__PURE__*/_jsx(PaperButton,{elevation:4,children:/*#__PURE__*/_jsx(AddCardButtonPulseRaw,{width:45,plusSize:\"1.8em\",textOnly:true})}),/*#__PURE__*/_jsx(\"input\",{hidden:true,accept:\"image/*\",multiple:false,type:\"file\",onChange:handleImage}),/*#__PURE__*/_jsxs(Box,{sx:{zIndex:3,position:'absolute',top:-15,width:'80%',height:'100%',textAlign:'center'},className:\"hidden-hover\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h10\",component:\"p\",style:{position:'absolute',bottom:-8,width:'100%',lineHeight:'16px',zIndex:4,color:\"#9B8E9A\",fontSize:'0.85em'},children:\"Haz clic aqu\\xED para subir una foto\"}),/*#__PURE__*/_jsx(UploadPhotoCardHover,{width:width,id:id,setOpenDialog:null,noButtonShown:true,hoverWidth:width})]})]})});};export default UploadPhotoCardEmpty;","map":{"version":3,"names":["React","Fragment","AddCardButtonPulseRaw","AddIcon","Paper","styled","Typography","Box","useDispatch","useSelector","photoUpdatedSrc","nextButtonEnabled","UploadPhotoCardHover","photoSetFile","uploadCroppedPhotos","theme","getImageSize","setImgResolutionMsg","jsx","_jsx","jsxs","_jsxs","UploadPhotoCardEmpty","_ref","id","_ref$width","width","dispatch","photos","state","letters","PaperButton","display","minWidth","height","justifyContent","alignItems","borderRadius","border","handleImage","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","acceptImage","imageBlob","imgSize","enableNext","imgCount","lettersAllFilled","wrap","_callee$","_context","prev","next","preventDefault","URL","createObjectURL","target","files","sent","imgSrc","type","map","photo","letter1","letter2","letter3","stop","_x","apply","arguments","HoverBox","marginTop","relativeFontSize","children","sx","position","elevation","plusSize","textOnly","hidden","accept","multiple","onChange","zIndex","top","textAlign","className","variant","component","style","bottom","lineHeight","color","fontSize","setOpenDialog","noButtonShown","hoverWidth"],"sources":["/home/luc/Documents/luclongin.github.io/src/components/uploadPhotoCardEmpty/uploadPhotoCardEmpty.component.jsx"],"sourcesContent":["import React, { Fragment } from \"react\";\nimport AddCardButtonPulseRaw from '../manageOrder/addCardButtonPulse/addCardButtonPulseRaw.component';\nimport AddIcon from '@mui/icons-material/Add';\nimport { Paper, styled, Typography, Box} from \"@mui/material\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { photoUpdatedSrc } from \"../../features/photoEdition/PhotoSlice\";\nimport { nextButtonEnabled } from \"../../features/handleFormButtons/FormButtonsSlice\";\nimport UploadPhotoCardHover from \"../UploadPhotoCardHover/uploadPhotoCardHover.component\";\nimport { photoSetFile } from \"../../features/photoEdition/PhotoSlice\";\nimport { uploadCroppedPhotos } from \"../../features/order/orders\";\nimport theme from \"../../utils/theme\";\nimport {getImageSize} from '../../utils/imageTools';\nimport { setImgResolutionMsg } from \"../../features/errorMessages/errorMessages\";\n\nconst UploadPhotoCardEmpty = ({ id, width=350 }) => {\n      const dispatch = useDispatch();\n      const photos = useSelector(state => state.photos);\n      const letters = useSelector(state => state.letters);\n\n      const PaperButton = styled(Paper) ({\n            display: 'flex',\n            width: width,\n            minWidth: width,\n            height: width,\n            justifyContent: 'center',\n            alignItems: 'center',\n            borderRadius: '5px',\n            border: '2px color #666',\n      })\n\n      const handleImage = async (e) => {\n            e.preventDefault();\n            let acceptImage = false;\n            const imageBlob = URL.createObjectURL(e.target.files[0]);\n            // checking if image size is acceptable\n            const imgSize = await getImageSize(imageBlob);\n                        \n            if (imgSize.width > 500 && imgSize.height > 500) {\n                  acceptImage = true;\n            }\n\n            // if image is within the accepted dimensions\n            if(acceptImage) {\n                  dispatch(setImgResolutionMsg(false));\n                  \n                  dispatch(photoUpdatedSrc({\n                        id: id,\n                        imgSrc: imageBlob,\n                        type: e.target.files[0].type\n                  }));\n                  \n                  // HANDLE NEXT BUTTON IF THREE PHOTOS\n                  // INDEPENDENT FROM PHOTOS\n                  // CASE: LAST IMAGE IS UPLOADED AND ALL LETTERS ARE ALREADY FILLED\n                  let enableNext = true;\n                  // because this is dispatch image, there is a lag of one photo\n                  // so if we have 2 photos imgSrc already completed\n                  // and this function is called, then that means that a 3rd one\n            \n                  let imgCount = 0;\n                  photos.map(photo => {\n                        if(photo.imgSrc !== null) {\n                              imgCount += 1;  \n                        }\n                  });\n                  if(imgCount < 2) {\n                        enableNext = false;\n                  }\n\n                  const lettersAllFilled = (letters.letter1 !== \"\") && (letters.letter2 !== \"\") && (letters.letter3 !== \"\");\n                  enableNext = enableNext && lettersAllFilled;\n                  if(enableNext) {\n                        dispatch(nextButtonEnabled(true));\n                  } else {\n                        dispatch(nextButtonEnabled(false));\n                  }\n            } else {\n                  dispatch(setImgResolutionMsg(true));\n            }\n      };\n\n      // Needed for Hovering\n      const HoverBox = styled(Box) ({\n            \"& .hidden-hover\": {\n                  display: \"none\"\n            },\n            \"&:hover .hidden-hover\": {\n                  display: \"flex\",\n                  marginTop: 0,\n            }\n      });\n\n      let relativeFontSize = '';\n      if (width < 350) {\n            relativeFontSize = '7.5em';\n      }\n\n      return(\n            <Fragment>\n                  <HoverBox sx={{position: 'relative', display: 'flex', justifyContent: 'center'}}>\n                        <PaperButton elevation={4}>\n                              <AddCardButtonPulseRaw width={45} plusSize=\"1.8em\" textOnly={true} /> \n                              { /*\n                              <AddIcon sx={{fontSize: relativeFontSize, color: theme.palette.primary.main}}/>\n                              */\n                              }\n                        </PaperButton>\n                        <input hidden accept=\"image/*\" multiple={false} type=\"file\" onChange={handleImage}/>\n                        <Box sx={{zIndex: 3, position: 'absolute', top: -15, width: '80%', height: '100%', textAlign: 'center'}} className=\"hidden-hover\" >\n                              <Typography variant=\"h10\" component=\"p\" style={{\n                                    position: 'absolute',\n                                    bottom: -8,\n                                    width: '100%',\n                                    lineHeight: '16px',\n                                    zIndex: 4,\n                                    color: \"#9B8E9A\",\n                                    fontSize: '0.85em'\n                              }}>\n                                    Haz clic aqu√≠ para subir una foto\n                              </Typography>\n                              <UploadPhotoCardHover width={width} id={id} setOpenDialog={null} noButtonShown={true} hoverWidth={width}/>\n                        </Box>\n                  </HoverBox>\n            </Fragment>\n      );\n}\n\nexport default UploadPhotoCardEmpty;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}