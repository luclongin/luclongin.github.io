{"ast":null,"code":"import _regeneratorRuntime from\"/home/luc/Documents/luclongin.github.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/luc/Documents/luclongin.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{IconButton,Box,Typography,Grid}from\"@mui/material\";import AddIcon from'@mui/icons-material/Add';import{useDispatch,useSelector}from\"react-redux\";import{photoDirectAdded,photoUpdatedSrc}from\"../../../features/photoEdition/PhotoSlice\";import{nextButtonEnabled}from\"../../../features/handleFormButtons/FormButtonsSlice\";import theme from\"../../../utils/theme\";import{styled}from\"@mui/material\";import{setImgResolutionMsg}from\"../../../features/errorMessages/errorMessages\";import{getImageSize}from'../../../utils/imageTools';/*\n      Button in order to add directly a photo. Works exactly like your model website's button.\n      Simplifies workflow as we do not have to call photoAdded action.\n*/import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddCardButtonPulse=function AddCardButtonPulse(_ref){var width=_ref.width,plusSize=_ref.plusSize,_ref$textOnly=_ref.textOnly,textOnly=_ref$textOnly===void 0?false:_ref$textOnly;var dispatch=useDispatch();var photos=useSelector(function(state){return state.photos;});var PulseButton=styled(IconButton)({'&.MuiButtonBase-root':{'&::after':{position:'absolute',top:0,left:0,width:'100%',height:'100%',borderRadius:'50%',animation:'ripple 2.5s infinite ease-in-out',content:'\"\"'}},'@keyframes ripple':{\"0%\":{transform:\"scale(1)\",opacity:\"0.9\",boxShadow:\"0 0 0 0 #FF36C4\"},\"70%\":{transform:\"scale(1)\",opacity:\"0.2\",boxShadow:\"0 0 0 10px #FF36C4\"},\"100%\":{transform:\"scale(1)\",opacity:\"0.05\",boxShadow:\"0 0 0 0 #FF36C4\"}}});var handleImage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var acceptImage,imageBlob,imgSize,enableNext,imgCount;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:acceptImage=false;imageBlob=URL.createObjectURL(e.target.files[0]);// checking if image size is acceptable\n_context.next=4;return getImageSize(imageBlob);case 4:imgSize=_context.sent;if(imgSize.width>500&&imgSize.height>500){acceptImage=true;}// if image is within the accepted dimensions\nif(acceptImage){dispatch(setImgResolutionMsg(false));dispatch(photoDirectAdded({imgDimensions:\"20x20\",imgSrc:imageBlob,type:e.target.files[0].type}));// ONLY AT LEAST 3\nenableNext=true;// because this is dispatch image, there is a lag of one photo\n// so if we have 2 photos imgSrc already completed\n// and this function is called, then that means that a 3rd one\nimgCount=0;photos.map(function(photo){if(photo.imgSrc!==null){imgCount+=1;}});if(imgCount<2){enableNext=false;}if(enableNext){dispatch(nextButtonEnabled(true));}}else{dispatch(setImgResolutionMsg(true));}case 7:case\"end\":return _context.stop();}},_callee);}));return function handleImage(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(PulseButton,{sx:{width:width,height:width,backgroundColor:'rgb(255, 102, 196)',color:'#ffffff',\"&:hover\":{backgroundColor:theme.palette.primary.darker,color:\"#ffffff\"}},component:\"label\",color:\"primary\",\"aria-label\":\"upload picture\",children:[/*#__PURE__*/_jsx(\"input\",{hidden:true,accept:\"image/*\",multiple:true,type:\"file\",onChange:handleImage}),/*#__PURE__*/_jsx(AddIcon,{sx:{fontSize:plusSize}})]})}),!textOnly&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sx:{mt:4,color:\"#9B8E9A\"},children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Haz clic para subir fotos\"})})]});};export default AddCardButtonPulse;","map":{"version":3,"names":["React","IconButton","Box","Typography","Grid","AddIcon","useDispatch","useSelector","photoDirectAdded","photoUpdatedSrc","nextButtonEnabled","theme","styled","setImgResolutionMsg","getImageSize","jsx","_jsx","jsxs","_jsxs","AddCardButtonPulse","_ref","width","plusSize","_ref$textOnly","textOnly","dispatch","photos","state","PulseButton","position","top","left","height","borderRadius","animation","content","transform","opacity","boxShadow","handleImage","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","acceptImage","imageBlob","imgSize","enableNext","imgCount","wrap","_callee$","_context","prev","next","URL","createObjectURL","target","files","sent","imgDimensions","imgSrc","type","map","photo","stop","_x","apply","arguments","container","children","item","xs","sx","backgroundColor","color","palette","primary","darker","component","hidden","accept","multiple","onChange","fontSize","mt","variant"],"sources":["/home/luc/Documents/luclongin.github.io/src/components/manageOrder/addCardButtonPulse/addCardButtonPulse.component.jsx"],"sourcesContent":["import React from \"react\";\nimport { IconButton, Box, Typography, Grid } from \"@mui/material\";\nimport AddIcon from '@mui/icons-material/Add';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { photoDirectAdded, photoUpdatedSrc } from \"../../../features/photoEdition/PhotoSlice\";\nimport { nextButtonEnabled } from \"../../../features/handleFormButtons/FormButtonsSlice\";\nimport theme from \"../../../utils/theme\";\nimport {styled} from \"@mui/material\";\nimport { setImgResolutionMsg } from \"../../../features/errorMessages/errorMessages\";\nimport {getImageSize} from '../../../utils/imageTools';\n\n/*\n      Button in order to add directly a photo. Works exactly like your model website's button.\n      Simplifies workflow as we do not have to call photoAdded action.\n*/\nconst AddCardButtonPulse = ({width, plusSize, textOnly=false}) => {\n      const dispatch = useDispatch();\n      const photos = useSelector(state => state.photos);      \n\n      const PulseButton = styled(IconButton) ({\n        '&.MuiButtonBase-root': {\n            '&::after': {\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            width: '100%',\n            height: '100%',\n            borderRadius: '50%',\n            animation: 'ripple 2.5s infinite ease-in-out',\n            content: '\"\"',\n            }\n        },\n        '@keyframes ripple': {\n            \"0%\": {\n                transform: \"scale(1)\",\n                opacity: \"0.9\",\n                boxShadow: \"0 0 0 0 #FF36C4\"\n            },\n            \"70%\": {\n                transform: \"scale(1)\",\n                opacity: \"0.2\",\n                boxShadow: \"0 0 0 10px #FF36C4\"\n            },\n            \"100%\": {\n                transform: \"scale(1)\",\n                opacity: \"0.05\",\n                boxShadow: \"0 0 0 0 #FF36C4\"\n            }\n        }\n      });\n\n      const handleImage = async (e) => {\n            let acceptImage = false;\n            const imageBlob = URL.createObjectURL(e.target.files[0]);\n            // checking if image size is acceptable\n            const imgSize = await getImageSize(imageBlob);\n            \n            if (imgSize.width > 500 && imgSize.height > 500) {\n                  acceptImage = true;\n            }\n\n            // if image is within the accepted dimensions\n            if(acceptImage) {\n                  dispatch(setImgResolutionMsg(false));\n                  dispatch(photoDirectAdded({\n                        imgDimensions: \"20x20\",\n                        imgSrc: imageBlob,\n                        type: e.target.files[0].type\n                  }));\n\n                  // ONLY AT LEAST 3\n                  let enableNext = true;\n                  // because this is dispatch image, there is a lag of one photo\n                  // so if we have 2 photos imgSrc already completed\n                  // and this function is called, then that means that a 3rd one\n            \n                  let imgCount = 0;\n                  photos.map(photo => {\n                        if(photo.imgSrc !== null) {\n                              imgCount += 1;  \n                        }\n                  });\n                  if(imgCount < 2) {\n                        enableNext = false;\n                  }\n\n                  if(enableNext) {\n                        dispatch(nextButtonEnabled(true));\n                  }\n            } else {\n                  dispatch(setImgResolutionMsg(true));\n            }\n      }\n\n      return(\n            <Grid container>\n                  <Grid item xs={12}>\n                        <PulseButton\n                              sx={{\n                                    width: width,\n                                    height: width,\n                                    backgroundColor: 'rgb(255, 102, 196)',\n                                    color: '#ffffff',\n                                    \"&:hover\" : {\n                                          backgroundColor: theme.palette.primary.darker,\n                                          color: \"#ffffff\"\n                                    }\n                              }}\n                              component=\"label\"\n                              color=\"primary\"\n                              aria-label=\"upload picture\"\n                        >\n                              <input hidden accept=\"image/*\" multiple type=\"file\" onChange={handleImage}/>\n                              <AddIcon sx={{\n                                    fontSize: plusSize\n                              }} />\n                        </PulseButton>\n                  </Grid>\n                  {!textOnly && (<Grid item xs={12} sx={{\n                  mt: 4,\n                  color: \"#9B8E9A\"\n                  }}>\n                  <Typography variant=\"h6\">\n                        Haz clic para subir fotos\n                  </Typography>\n                  </Grid>)\n                  }\n            </Grid> \n            \n      );\n}\n\nexport default AddCardButtonPulse;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}