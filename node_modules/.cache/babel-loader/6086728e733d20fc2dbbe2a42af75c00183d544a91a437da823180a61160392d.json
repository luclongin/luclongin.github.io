{"ast":null,"code":"import _defineProperty from\"/home/luc/Documents/luclongin.github.io/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"/home/luc/Documents/luclongin.github.io/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/home/luc/Documents/luclongin.github.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/luc/Documents/luclongin.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import DiscountService from\"../../services/DiscountService\";var initialState=[];export var createDiscount=createAsyncThunk(\"orders/createDiscount\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(discount){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return DiscountService.createDiscount(discount);case 2:res=_context.sent;return _context.abrupt(\"return\",res.data);case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var checkDiscount=createAsyncThunk(\"orders/checkDiscount\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(discountId){var res,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(discountId!==undefined&&discountId!==\"\"&&discountId!==null)){_context2.next=15;break;}_context2.prev=1;_context2.next=4;return DiscountService.checkDiscount(discountId);case 4:res=_context2.sent;if(res.data.exists){console.log(\"res data:\",res.data);// if the discount exists\nresult={discountId:res.data.id,discountAmount:res.data.amount,discountType:res.data.type,discountPercentage:res.data.percentage};}else{// if the discount is wrong\nresult=false;}console.log(\"Result:\",result);return _context2.abrupt(\"return\",result);case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);return _context2.abrupt(\"return\",false);case 13:_context2.next=16;break;case 15:return _context2.abrupt(\"return\",false);case 16:case\"end\":return _context2.stop();}},_callee2,null,[[1,10]]);}));return function(_x2){return _ref2.apply(this,arguments);};}());export var getDiscounts=createAsyncThunk(\"orders/getDiscounts\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return DiscountService.getDiscounts();case 2:res=_context3.sent;return _context3.abrupt(\"return\",res.data);case 4:case\"end\":return _context3.stop();}},_callee3);})));export var deleteDiscount=createAsyncThunk(\"orders/discounts\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(discountId){var res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:console.log(\"thunkbefore\");_context4.next=3;return DiscountService.deleteDiscount(discountId);case 3:res=_context4.sent;console.log(\"thunkafter\");return _context4.abrupt(\"return\",res.data);case 6:case\"end\":return _context4.stop();}},_callee4);}));return function(_x3){return _ref4.apply(this,arguments);};}());var discountSlice=createSlice({name:\"discounts\",initialState:initialState,extraReducers:(_extraReducers={},_defineProperty(_extraReducers,createDiscount.fulfilled,function(state,action){state.push(action.payload);}),_defineProperty(_extraReducers,getDiscounts.fulfilled,function(state,action){return _toConsumableArray(action.payload);}),_defineProperty(_extraReducers,checkDiscount.fulfilled,function(state,action){return;}),_defineProperty(_extraReducers,deleteDiscount.fulfilled,function(state,action){var index=state.findIndex(function(_ref5){var discountId=_ref5.discountId;return discountId===action.payload.discountId;});state.splice(index,1);}),_extraReducers)});var reducer=discountSlice.reducer;export default reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","DiscountService","initialState","createDiscount","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","discount","res","wrap","_callee$","_context","prev","next","sent","abrupt","data","stop","_x","apply","arguments","checkDiscount","_ref2","_callee2","discountId","result","_callee2$","_context2","undefined","exists","console","log","id","discountAmount","amount","discountType","type","discountPercentage","percentage","t0","_x2","getDiscounts","_callee3","_callee3$","_context3","deleteDiscount","_ref4","_callee4","_callee4$","_context4","_x3","discountSlice","name","extraReducers","_extraReducers","_defineProperty","fulfilled","state","action","push","payload","_toConsumableArray","index","findIndex","_ref5","splice","reducer"],"sources":["/home/luc/Documents/luclongin.github.io/src/features/discountUpload/discountUpload.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport DiscountService from \"../../services/DiscountService\";\n\nconst initialState = [];\n\nexport const createDiscount = createAsyncThunk(\n      \"orders/createDiscount\",\n      async (discount) => {\n            const res = await DiscountService.createDiscount(discount);\n            return res.data;\n      }\n);\n\nexport const checkDiscount = createAsyncThunk(\n      \"orders/checkDiscount\",\n      async (discountId) => {\n            if(discountId !== undefined && discountId !== \"\" && discountId !== null) {\n                  try {\n                        const res = await DiscountService.checkDiscount(discountId);\n                        let result;\n                        if(res.data.exists) {\n                              console.log(\"res data:\", res.data);\n                              // if the discount exists\n                              result = {\n                                    discountId: res.data.id,\n                                    discountAmount: res.data.amount,\n                                    discountType: res.data.type,\n                                    discountPercentage: res.data.percentage\n                              }\n                        } else {\n                              // if the discount is wrong\n                              result = false;\n                        }\n                        console.log(\"Result:\", result);\n                        return result;\n                  } catch (e) {\n                        return false;\n                  }\n            } else {\n                  return false;\n            }\n      }\n)\n\nexport const getDiscounts = createAsyncThunk(\n      \"orders/getDiscounts\",\n      async () => {\n            const res = await DiscountService.getDiscounts();\n            return res.data;\n      }\n);\n\nexport const deleteDiscount = createAsyncThunk(\n      \"orders/discounts\",\n      async (discountId) => {\n            console.log(\"thunkbefore\");\n            const res = await DiscountService.deleteDiscount(discountId);\n            console.log(\"thunkafter\");\n            return res.data;\n      }\n)\n\nconst discountSlice = createSlice({\n      name: \"discounts\",\n      initialState,\n      extraReducers: {\n            [createDiscount.fulfilled]: (state, action) => {\n                  state.push(action.payload);\n            },\n            [getDiscounts.fulfilled]: (state, action) => {\n                  return [...action.payload];\n            },\n            [checkDiscount.fulfilled]: (state, action) => {\n                  return;\n            },\n            [deleteDiscount.fulfilled]: (state, action) => {\n                  let index = state.findIndex(({discountId}) => discountId === action.payload.discountId);\n                  state.splice(index, 1);\n            }\n      },\n});\n\n\nconst { reducer } = discountSlice;\nexport default reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}