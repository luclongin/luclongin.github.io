{"ast":null,"code":"import _defineProperty from\"/home/luc/Documents/luclongin.github.io/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"/home/luc/Documents/luclongin.github.io/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/home/luc/Documents/luclongin.github.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/luc/Documents/luclongin.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk,createAction}from\"@reduxjs/toolkit\";import PhotoService from\"../../services/PhotoService\";var initialState=[];export var uploadCroppedPhotos=createAsyncThunk(\"orders/upload\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(photo){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return PhotoService.uploadPhoto(photo);case 2:res=_context.sent;return _context.abrupt(\"return\",res.data);case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var createPhoto=createAsyncThunk(\"orders/createPhoto\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(photoData){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return PhotoService.createPhoto(photoData);case 2:res=_context2.sent;return _context2.abrupt(\"return\",res.data);case 4:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());export var getPhotos=createAsyncThunk(\"orders/getPhotos\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return PhotoService.getPhotos();case 2:res=_context3.sent;return _context3.abrupt(\"return\",res.data);case 4:case\"end\":return _context3.stop();}},_callee3);})));export var deletePhoto=createAsyncThunk(\"orders/deletePhoto\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(orderId){var res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return PhotoService.deletePhoto(orderId);case 2:res=_context4.sent;return _context4.abrupt(\"return\",res.data);case 4:case\"end\":return _context4.stop();}},_callee4);}));return function(_x3){return _ref4.apply(this,arguments);};}());var photosSlice=createSlice({name:\"photos\",initialState:initialState,extraReducers:(_extraReducers={},_defineProperty(_extraReducers,createPhoto.fulfilled,function(state,action){state.push(action.payload);}),_defineProperty(_extraReducers,uploadCroppedPhotos.fulfilled,function(state,action){return state;}),_defineProperty(_extraReducers,getPhotos.fulfilled,function(state,action){return _toConsumableArray(action.payload);}),_defineProperty(_extraReducers,deletePhoto.fulfilled,function(state,action){var index=state.findIndex(function(_ref5){var orderId=_ref5.orderId;return orderId===action.payload.orderId;});state.splice(index,1);}),_extraReducers)});var reducer=photosSlice.reducer;export default reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","createAction","PhotoService","initialState","uploadCroppedPhotos","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","photo","res","wrap","_callee$","_context","prev","next","uploadPhoto","sent","abrupt","data","stop","_x","apply","arguments","createPhoto","_ref2","_callee2","photoData","_callee2$","_context2","_x2","getPhotos","_callee3","_callee3$","_context3","deletePhoto","_ref4","_callee4","orderId","_callee4$","_context4","_x3","photosSlice","name","extraReducers","_extraReducers","_defineProperty","fulfilled","state","action","push","payload","_toConsumableArray","index","findIndex","_ref5","splice","reducer"],"sources":["/home/luc/Documents/luclongin.github.io/src/features/photoUpload/photoUpload.js"],"sourcesContent":["import { createSlice, createAsyncThunk, createAction } from \"@reduxjs/toolkit\";\nimport PhotoService from \"../../services/PhotoService\";\n\nconst initialState = [];\n\nexport const uploadCroppedPhotos = createAsyncThunk(\n      \"orders/upload\",\n      async (photo) => {\n            const res = await PhotoService.uploadPhoto(photo);\n            return res.data;\n      }\n);\n\nexport const createPhoto = createAsyncThunk(\n      \"orders/createPhoto\",\n      async (photoData) => {\n            const res = await PhotoService.createPhoto(photoData);\n            return res.data;\n      }\n);\n\nexport const getPhotos = createAsyncThunk(\n      \"orders/getPhotos\",\n      async () => {\n            const res = await PhotoService.getPhotos();\n            return res.data;\n      }\n);\n\nexport const deletePhoto = createAsyncThunk(\n      \"orders/deletePhoto\",\n      async (orderId) => {\n            const res = await PhotoService.deletePhoto(orderId);\n            return res.data;\n      }\n)\n\nconst photosSlice = createSlice({\n      name: \"photos\",\n      initialState,\n      extraReducers: {\n            [createPhoto.fulfilled]: (state, action) => {\n                  state.push(action.payload);\n            },\n            [uploadCroppedPhotos.fulfilled]: (state, action) => {\n                  return state;\n            },\n            [getPhotos.fulfilled]: (state, action) => {\n                  return [...action.payload];\n            },\n            [deletePhoto.fulfilled]: (state, action) => {\n                  let index = state.findIndex(({orderId}) => orderId === action.payload.orderId);\n                  state.splice(index, 1);\n            }\n      },\n});\n\n\nconst { reducer } = photosSlice;\nexport default reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}